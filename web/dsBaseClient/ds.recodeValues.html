<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: ds.recodeValues calling recodeValuesDS1 and recodeValuesDS2</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../../assets/R.css" />
</head><body>

<table width="100%" summary="page for ds.recodeValues {dsBaseClient}"><tr><td>ds.recodeValues {dsBaseClient}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>ds.recodeValues calling recodeValuesDS1 and recodeValuesDS2</h2>

<h3>Description</h3>

<p>Takes specified values of elements in a vector and converts
them to a matched set of alternative specified values
</p>


<h3>Usage</h3>

<pre>
ds.recodeValues(
  var.name = NULL,
  values2replace.vector = NULL,
  new.values.vector = NULL,
  force.output.format = "no",
  newobj = NULL,
  datasources = NULL,
  notify.of.progress = FALSE
)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>var.name</code></td>
<td>
<p>a character string providing the name for the vector representing the
variable to be recoded</p>
</td></tr>
<tr valign="top"><td><code>values2replace.vector</code></td>
<td>
<p>a numeric or character vector specifying the values in the
vector specified by the argument &lt;var.name&gt; that are to be replaced by new
values as specified in the new.values.vector. Example 1, with the two arguments
values2replace.vector=c(0,1,2) and new.values.vector=c(20,27.5,37): 0s in the declared
&lt;var.name&gt; will be replaced by the value 20, 1s by 27.5 and 2s by 37. If there are any
values in the &lt;var.name&gt; vector other than 0, 1 or 2 they will remain unchanged.
Example 2, with the two arguments values2replace.vector=c(0,1,2,NA) and
new.values.vector=c(&quot;Norm&quot;,&quot;Overwt&quot;, &quot;Obese&quot;,999): 0s in the declared
&lt;var.name&gt; will be replaced by the character value &quot;Norm&quot;, 1s by &quot;Overwt&quot;,
2s by &quot;Obese&quot; and NAs by 999. As context to these two examples, these represent
the recoding of a grouped BMI variable (taking values 0,1,2 and NA) with the
numeric value representing the approximate mean of each group (example 1)
and category names and an explicit value for missing (example 2). Each value
in &lt;values2replace.vector&gt; can only appear once and the length of &lt;values2replace.vector&gt;
must be equal to the length of &lt;new.values.vector&gt;</p>
</td></tr>
<tr valign="top"><td><code>new.values.vector</code></td>
<td>
<p>a numeric or character vector specifying the new values
to which the specified values in the vector &lt;var.name&gt; are to be changed.
The length of &lt;new.values.vector&gt; must be equal to the length of
&lt;values2replace.vector&gt; but more than one value in the latter can be changed
to the same value in the former - so &lt;new.values.vector&gt; can include repeated values</p>
</td></tr>
<tr valign="top"><td><code>force.output.format</code></td>
<td>
<p>character string. If this is 'numeric' the recoded
(output) vector will be numeric - any non-numeric values in the
&lt;new.values.vector&gt; will appear as NaN in the recoded (output) vector.
If the &lt;force.output.format&gt; argument is declared as 'character' all values
in the recoded output vector will be in character format. The
&lt;force.output.format&gt; argument defaults to &quot;no&quot; and in that case,
if the vector identified by the &lt;values2replace.vector&gt; argument is itself
numeric and if all values in the &lt;new.values.vector&gt; are numeric,
the recoded output vector will also be numeric. Otherwise, it will be coerced
to character format.</p>
</td></tr>
<tr valign="top"><td><code>newobj</code></td>
<td>
<p>This a character string providing a name for the recoded vector
representing the primary output of the ds.recodeValues() function.
This defaults to 'recodevalues.newobj'</p>
</td></tr>
<tr valign="top"><td><code>datasources</code></td>
<td>
<p>specifies the particular opal object(s) to use. If the &lt;datasources&gt;
argument is not specified the default set of opals will be used. The default opals
are called default.opals and the default can be set using the function
ds.setDefaultOpals. If the &lt;datasources&gt; is to be specified, it should be set without
inverted commas: e.g. datasources=opals.em or datasources=default.opals. If you wish to
apply the function solely to e.g. the second opal server in a set of three,
the argument can be specified as: e.g. datasources=opals.em[2].
If you wish to specify the first and third opal servers in a set you specify:
e.g. datasources=opals.em[c(1,3)]</p>
</td></tr>
<tr valign="top"><td><code>notify.of.progress</code></td>
<td>
<p>specifies if console output should be produce to indicate
progress. The default value for notify.of.progress is FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Recodes individual values with new individual values. This can
apply to numeric values, character values and NAs. One particular use of
ds.recodeValues is to convert NAs to an explicit value or vice-versa.
Please see ds.Boole to recode a RANGE of values with a new value. Please
note that if you wish to do no more than replace NAs with a new code (e.g. 999)
there is a restriction imposed by the fact that if the &lt;values2replace&gt; argument
is specified as c(NA) or NA and the &lt;new.values.vector&gt; argument as c(999) the
function will fail because it will not properly interpret the first (all values
missing) argument as a valid scalar or vector of length 1. To work around this
restriction please specify the new &lt;values2replace&gt; argument as c(x,NA) and the
&lt;new.values.vector&gt; argument as c(x,999) where x is one of the other valid
(non-missing) levels in the vector to be recoded. This will leave the x values
unchanged but because the &lt;values2replace&gt; argument is not all missing it will
correctly recognise that there are two values to change one of which happens to
be NA to be replaced by 999 and the other will be 'replaced' by its pre-existing value.
</p>


<h3>Value</h3>

<p>the object specified by the &lt;newobj&gt; argument (or default name '&lt;var.name&gt;_recoded').
which is written to the serverside. In addition, two validity messages are returned
indicating whether &lt;newobj&gt; has been created in each data source and if so whether
it is in a valid form. If its form is not valid in at least one study - e.g. because
a disclosure trap was tripped and creation of the full output object was blocked -
the function returns a range of possible studysideMessages that can explain
the error in creating
the full output object. As well as appearing on the screen at run time,if you wish to
see the relevant studysideMessages at a later date you can use the ds.message
function. If you type ds.message(&quot;newobj&quot;) it will print out the relevant
studysideMessage from any datasource in which there was an error in creating &lt;newobj&gt;
and a studysideMessage was saved. If there was no error and &lt;newobj&gt; was created
without problems no studysideMessage will have been saved and ds.message(&quot;newobj&quot;)
will return the message: &quot;ALL OK: there are no studysideMessage(s) on this datasource&quot;.
</p>


<h3>Author(s)</h3>

<p>DataSHIELD Development Team
</p>

<hr /><div style="text-align: center;">[Package <em>dsBaseClient</em> version 5.1.0 ]</div>
</body></html>
