<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Reshape server-side grouped data</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../../assets/R.css" />
</head><body>

<table width="100%" summary="page for ds.reShape {dsBaseClient}"><tr><td>ds.reShape {dsBaseClient}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Reshape server-side grouped data</h2>

<h3>Description</h3>

<p>Reshapes a data frame containing longitudinal or
otherwise grouped data from 'wide' to 'long' format or vice-versa.
</p>


<h3>Usage</h3>

<pre>
ds.reShape(
  data.name = NULL,
  varying = NULL,
  v.names = NULL,
  timevar.name = "time",
  idvar.name = "id",
  drop = NULL,
  direction = NULL,
  sep = ".",
  newobj = "newObject",
  datasources = NULL
)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>data.name</code></td>
<td>
<p>a character string specifying the name of the data frame to be reshaped.</p>
</td></tr>
<tr valign="top"><td><code>varying</code></td>
<td>
<p>names of sets of variables in the wide format that correspond to single
variables in 'long' format.</p>
</td></tr>
<tr valign="top"><td><code>v.names</code></td>
<td>
<p>the names of variables in the 'long' format that correspond to multiple variables
in the 'wide' format.</p>
</td></tr>
<tr valign="top"><td><code>timevar.name</code></td>
<td>
<p>the variable in 'long' format that differentiates multiple
records from the same group or individual. 
If more than one record matches, the first will be taken.</p>
</td></tr>
<tr valign="top"><td><code>idvar.name</code></td>
<td>
<p>names of one or more variables in 'long' format that identify multiple
records from the same group/individual. These variables may also be present in 'wide' format.</p>
</td></tr>
<tr valign="top"><td><code>drop</code></td>
<td>
<p>a vector of names of variables to drop before reshaping. This can simplify the
resultant output.</p>
</td></tr>
<tr valign="top"><td><code>direction</code></td>
<td>
<p>a character string that partially matched to either 'wide' to reshape from
'long' to 'wide' format, or 'long' to reshape from 'wide' to 'long' format.</p>
</td></tr>
<tr valign="top"><td><code>sep</code></td>
<td>
<p>a character vector of length 1, indicating a separating character in the variable
names in the 'wide' format. This is used for creating good <code>v.names</code> and times arguments based
on the names in the <code>varying</code> argument. This is also used to create variable names
when reshaping
to 'wide' format.</p>
</td></tr>
<tr valign="top"><td><code>newobj</code></td>
<td>
<p>a character string that provides the name for the output object
that is stored on the data servers. 
Default <code>reshape.newobj</code>.</p>
</td></tr>
<tr valign="top"><td><code>datasources</code></td>
<td>
<p>a list of <code>DSConnection-class</code> 
objects obtained after login. If the <code>datasources</code> argument is not specified
the default set of connections will be used: see <code>datashield.connections_default</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is based on the native R function <code>reshape</code>.
It reshapes a data frame containing longitudinal or otherwise grouped data
between 'wide' format with repeated
measurements in separate columns of the same record and 'long' format with the repeated
measurements in separate records. The reshaping can be in either direction. 
Server function called: <code>reShapeDS</code>
</p>


<h3>Value</h3>

<p><code>ds.reShape</code> returns to the server-side  a reshaped data frame 
converted from 'long' to 'wide' format or from 'wide' to long' format. 
Also, two validity messages are returned to the client-side
indicating whether the new object  has been created in each data source and if so whether
it is in a valid form.
</p>


<h3>Author(s)</h3>

<p>DataSHIELD Development Team
</p>


<h3>Examples</h3>

<pre>
## Not run: 

 ## Version 6, for version 5 see Wiki
  # Connecting to the Opal servers
  
  require('DSI')
  require('DSOpal')
  require('dsBaseClient')
  
  builder &lt;- DSI::newDSLoginBuilder()
  builder$append(server = "study1", 
                 url = "http://192.168.56.100:8080/", 
                 user = "administrator", password = "datashield_test&amp;", 
                 table = "SURVIVAL.EXPAND_NO_MISSING1", driver = "OpalDriver")
  builder$append(server = "study2", 
                 url = "http://192.168.56.100:8080/", 
                 user = "administrator", password = "datashield_test&amp;", 
                 table = "SURVIVAL.EXPAND_NO_MISSING2", driver = "OpalDriver")
  builder$append(server = "study3",
                 url = "http://192.168.56.100:8080/", 
                 user = "administrator", password = "datashield_test&amp;", 
                 table = "SURVIVAL.EXPAND_NO_MISSING3", driver = "OpalDriver")
  logindata &lt;- builder$build()
  
  # Log onto the remote Opal training servers
  connections &lt;- DSI::datashield.login(logins = logindata, assign = TRUE, symbol = "D") 
  
  #Reshape server-side grouped data
  
  ds.reShape(data.name = "D", 
             v.names = "age.60", 
             timevar.name = "time.id",
             idvar.name = "id",
             direction = "wide",
             newobj = "reshape1_obj",
             datasources = connections)
  
  # Clear the Datashield R sessions and logout
  datashield.logout(connections) 

## End(Not run)

</pre>

<hr /><div style="text-align: center;">[Package <em>dsBaseClient</em> version 6.1.0 ]</div>
</body></html>
