<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Generates 2-dimensional contingency tables</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../../assets/R.css" />
</head><body>

<table width="100%" summary="page for ds.table2D {dsBaseClient}"><tr><td>ds.table2D {dsBaseClient}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Generates 2-dimensional contingency tables</h2>

<h3>Description</h3>

<p>The function ds.table2D is a client-side wrapper function.
It calls the server-side function 'table2dDS' to generate
2-dimensional tables for all data sources.
</p>


<h3>Usage</h3>

<pre>
ds.table2D(x = NULL, y = NULL, type = "combine", warningMessage = TRUE,
  datasources = NULL)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>
<p>a character, the name of a numerical vector with
discrete values - usually a factor.</p>
</td></tr>
<tr valign="top"><td><code>y</code></td>
<td>
<p>a character, the name of a numerical vector with
discrete values - usually a factor.</p>
</td></tr>
<tr valign="top"><td><code>type</code></td>
<td>
<p>a character which represent the type of table
to ouput: pooled table or one table for each data source.
If <code>type</code> is set to 'combine', a pooled
2-dimensional table is returned; if If <code>type</code> is set
to 'split' a 2-dimensional table is returned for each
data source.</p>
</td></tr>
<tr valign="top"><td><code>warningMessage</code></td>
<td>
<p>a boolean, if set to TRUE (deafult)
a warning is displayed if any returned table is invalid.
Warning messages are suppressed if this parameter is set
to FALSE. However the analyst can still view 'validity'
information which are stored in the output object
'validity' - see the list of output objects.</p>
</td></tr>
<tr valign="top"><td><code>datasources</code></td>
<td>
<p>a list of opal object(s) obtained
after login in to opal servers; these objects hold also
the data assign to R, as <code>dataframe</code>, from opal
datasources.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The table returned by the server side function might be
valid (non disclosive - no table cell have counts between 1
and the minimal number agreed by the data owner and set in
opal) or invalid (potentially disclosive - one or more
table cells have a count between 1 and the minimal number
agreed by the data owner). If a 2-dimensional table is
invalid all the cells are set to NA except the total count.
This way it is possible the know the total count and
combine total counts across data sources but it is not
possible to identify the cell(s) that had the small counts
which render the table invalid.
</p>


<h3>Value</h3>

<p>A list object containing the following items:
</p>
<table summary="R valueblock">
<tr valign="top"><td><code>counts</code></td>
<td>
<p> table(s) that hold counts for each
level/category. If some cells counts are invalid (see
'Details' section) only the total (outer) cell counts are
displayed in the returned individual study tables or in the
pooled table.</p>
</td></tr> <tr valign="top"><td><code>rowPercent</code></td>
<td>
<p> table(s) that hold row
percentages for each level/category. Inner cells are
reported as missing if one or more cells are 'invalid'.</p>
</td></tr>
<tr valign="top"><td><code>colPercent</code></td>
<td>
<p> table(s) that hold column percentages
for each level/category. Inner cells are reported as
missing if one or more cells are 'invalid'.</p>
</td></tr>
<tr valign="top"><td><code>chi2Test</code></td>
<td>
<p>Chi-squared test for homogeneity.</p>
</td></tr>
<tr valign="top"><td><code>validity</code></td>
<td>
<p> a text that informs the analyst about the
validity of the output tables. If any tables are invalid
the studies they are originated from are also mentioned in
the text message.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Gaye, A.; Burton, P.
</p>


<h3>See Also</h3>

<p>ds.table1D for the tabulating one vector.
</p>


<h3>Examples</h3>

<pre>
{

  # load the file that contains the login details
  data(logindata)

  # login and assign all the variables to R
  opals  &lt;-  datashield.login(logins=logindata,assign=TRUE)

  # Example 1: generate a two dimensional table, outputting combined contingency tables - default behaviour
  output &lt;- ds.table2D(x='D$DIS_DIAB', y='D$GENDER')
  # display the 5 results items, one at a time to avoid having too much information displayed at the same time
  output$counts
  output$rowPercent
  output$colPercent
  output$chi2Test
  output$validity

  # Example 2: generate a two dimensional table, outputting study specific contingency tables
  ds.table2D(x='D$DIS_DIAB', y='D$GENDER', type='split')
  # display the 5 results items, one at a time to avoid having too much information displayed at the same time
  output$counts
  output$rowPercent
  output$colPercent
  output$chi2Test
  output$validity

  # Example 3: generate a two dimensional table, outputting combined contingency tables
  # *** this example shows what happens when one or studies return an invalis table ***
  output &lt;- ds.table2D(x='D$DIS_CVA', y='D$GENDER')
  output$counts
  output$rowPercent
  output$colPercent
  output$chi2Test
  output$validity

  # Example 4: same example as above but output is given for each study, separately (i.e. type='split')
  # *** this example shows what happens when one or studies return an invalis table ***
  output &lt;- ds.table2D(x='D$DIS_CVA', y='D$GENDER', type='split')
  output$counts
  output$rowPercent
  output$colPercent
  output$chi2Test
  output$validity

  # clear the Datashield R sessions and logout
  datashield.logout(opals)

}
</pre>

<hr /><div style="text-align: center;">[Package <em>dsBaseClient</em> version 4.1.0 ]</div>
</body></html>
