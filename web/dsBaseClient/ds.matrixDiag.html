<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: ds.matrixDiag calling assign function matrixDiagDS</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../../assets/R.css" />
</head><body>

<table width="100%" summary="page for ds.matrixDiag {dsBaseClient}"><tr><td>ds.matrixDiag {dsBaseClient}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>ds.matrixDiag calling assign function matrixDiagDS</h2>

<h3>Description</h3>

<p>Extracts the diagonal vector from a square matrix A or
creates a diagonal matrix A based on a vector or a scalar value and
writes the output to the serverside
</p>


<h3>Usage</h3>

<pre>
ds.matrixDiag(x1 = NULL, aim = NULL, nrows.scalar = NULL,
  newobj = NULL, datasources = NULL)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x1</code></td>
<td>
<p>This argument determines the input object. Depending on the
specified value of the &lt;aim&gt; argument it may be a character string
identifying the name of a serverside vector or scalar. Alternatively,
it may be a single number e.g. 29, or a vector specified as
e.g. c(3,5,-2,8) or it can be the name (but not in inverted commas) of
a clientside scalar or clientside vector which have already been assigned
values e.g. scalar.s&lt;-83, x1=scalar.s; or vector.v&lt;-c(7,0,-2,3:9), x1=vector.v.</p>
</td></tr>
<tr valign="top"><td><code>aim</code></td>
<td>
<p>a character string specifying what behaviour is required
of the function. It must take one of five values:
&quot;serverside.vector.2.matrix&quot;; &quot;serverside.scalar.2.matrix&quot;;
&quot;serverside.matrix.2.vector&quot;; &quot;clientside.vector.2.matrix&quot;;
or &quot;clientside.scalar.2.matrix&quot;</p>
</td></tr>
<tr valign="top"><td><code>nrows.scalar</code></td>
<td>
<p>if this takes value k, it forces the output
matrix to have k rows and k columns. If x1 is a scalar, this argument
must be set as otherwise the dimensions of the square matrix are undefined.
If x1 is a vector and no value is set for the &lt;nrows.scalar&gt; argument the
dimensions of the square matrix are defined by the length of the vector. If
x1 is a vector and the &lt;nrows.scalar&gt; is set at k, the vector will be used
repeatedly to fill up the diagonal. If for example the vector is of length
7 and &lt;nrows.scalar&gt; is specified as 18, a square diagonal matrix with
18 rows and 18 columns will be created with the vector repeated twice from
element 1,1 to element 14,14 and the first 4 elements of the vector will
fill diagonal elements 15,15 to 18,18. All off diagonal elements will be 0.
The &lt;nrows.scalar&gt; argument can either be set as a number, a clientside
scalar holding a single number or a character string representing the
name of a serverside scalar.</p>
</td></tr>
<tr valign="top"><td><code>newobj</code></td>
<td>
<p>A character string specifying the name of the output object
to be written to the serverside which may be a matrix or a vector
depending on the value of the &lt;aim&gt; argument.If no &lt;newobj&gt; argument is
specified, the output object name defaults to &quot;diag&quot;.</p>
</td></tr>
<tr valign="top"><td><code>datasources</code></td>
<td>
<p>specifies the particular opal object(s) to use. If the &lt;datasources&gt;
argument is not specified the default set of opals will be used. The default opals
are called default.opals and the default can be set using the function
ds.setDefaultOpals. If the &lt;datasources&gt; is to be specified, it should be set without
inverted commas: e.g. datasources=opals.em or datasources=default.opals. If you wish to
apply the function solely to e.g. the second opal server in a set of three,
the argument can be specified as: e.g. datasources=opals.em[2].
If you wish to specify the first and third opal servers in a set you specify:
e.g. datasources=opals.em[c(1,3)]</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Depending on the specified value of the &lt;aim&gt; argument this
function behaves differently. If aim==&quot;serverside.vector.2.matrix&quot;
the function takes a serverside vector and writes out a square matrix with
the vector as its diagonal and all off-diagonal values = 0. The dimensions
of the output matrix are determined by the length of the vector.
If the vector is of length k, the output matrix has k rows and k columns.
If aim==&quot;serverside.scalar.2.matrix&quot;
the function takes a serverside scalar and writes out a square matrix with all
diagonal values equal to the value of the scalar
and all off diagonal values = 0. The dimensions of the square
matrix are determined by the value of the &lt;nrows.scalar&gt; argument;
If aim==&quot;serverside.matrix.2.vector&quot;
the function takes a square serverside matrix and extracts
its diagonal values as a vector which is written to the serverside;
If aim==&quot;clientside.vector.2.matrix&quot;
the function takes a vector specified on the clientside
and writes out a square matrix to the serverside with
the vector as its diagonal and all off-diagonal values = 0. The dimensions
of the output matrix are determined by the length of the vector.
If the vector is of length k, the output matrix has k rows and k columns;
If aim==&quot;clientside.scalar.2.matrix&quot;
the function takes a scalar specified on the clientside
and writes out a square matrix with all diagonal values equal
to the value of the scalar. The dimensions of the square
matrix are determined by the value of the &lt;nrows.scalar&gt; argument.
</p>


<h3>Value</h3>

<p>the matrix or vector specified by the &lt;newobj&gt; argument
(or default name diag)
which is written to the serverside. In addition, two validity messages are returned
indicating whether &lt;newobj&gt; has been created in each data source and if so whether
it is in a valid form. If its form is not valid in at least one study - e.g. because
a disclosure trap was tripped and creation of the full output object was blocked -
ds.matrixDiag also returns any studysideMessages that can explain the error in creating
the full output object. As well as appearing on the screen at run time,if you wish to
see the relevant studysideMessages at a later date you can use the ds.message
function. If you type ds.message(&quot;newobj&quot;) it will print out the relevant
studysideMessage from any datasource in which there was an error in creating &lt;newobj&gt;
and a studysideMessage was saved. If there was no error and &lt;newobj&gt; was created
without problems no studysideMessage will have been saved and ds.message(&quot;newobj&quot;)
will return the message: &quot;ALL OK: there are no studysideMessage(s) on this datasource&quot;.
</p>


<h3>Author(s)</h3>

<p>Paul Burton for DataSHIELD Development Team
</p>

<hr /><div style="text-align: center;">[Package <em>dsBaseClient</em> version 5.0.0 ]</div>
</body></html>
