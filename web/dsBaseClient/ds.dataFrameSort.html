<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Sorts data frames in the server-side</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../../assets/R.css" />
</head><body>

<table width="100%" summary="page for ds.dataFrameSort {dsBaseClient}"><tr><td>ds.dataFrameSort {dsBaseClient}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Sorts data frames in the server-side</h2>

<h3>Description</h3>

<p>Sorts a data frame using a specified sort key.
</p>


<h3>Usage</h3>

<pre>
ds.dataFrameSort(
  df.name = NULL,
  sort.key.name = NULL,
  sort.descending = FALSE,
  sort.method = "default",
  newobj = NULL,
  datasources = NULL
)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>df.name</code></td>
<td>
<p>a character string providing the name of the data frame
to be sorted.</p>
</td></tr>
<tr valign="top"><td><code>sort.key.name</code></td>
<td>
<p>a character string providing the name for the sort key.</p>
</td></tr>
<tr valign="top"><td><code>sort.descending</code></td>
<td>
<p>logical, if TRUE the data frame will be sorted.
by the sort key in descending order. Default = FALSE (sort order ascending).</p>
</td></tr>
<tr valign="top"><td><code>sort.method</code></td>
<td>
<p>a character string that specifies the method to be used 
to sort the data frame. This can be set as 
<code>"alphabetic"</code>,<code>"a"</code> or <code>"numeric"</code>, <code>"n"</code>.</p>
</td></tr>
<tr valign="top"><td><code>newobj</code></td>
<td>
<p>a character string that provides the name for the output data frame 
that is stored on the data servers. Default <code>dataframesort.newobj</code>.   
where <code>df.name</code> is the first argument of <code>ds.dataFrameSort()</code>.</p>
</td></tr>
<tr valign="top"><td><code>datasources</code></td>
<td>
<p>a list of <code>DSConnection-class</code> 
objects obtained after login. If the <code>datasources</code> argument is not specified
the default set of connections will be used: see <code>datashield.connections_default</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It sorts a specified
data.frame on the serverside using a sort key also on the server-side. The
sort key can either sit in the data.frame or outside it. 
The sort key can be forced to be interpreted as alphabetic or numeric. 
</p>
<p>When a numeric vector is sorted alphabetically, the order can look confusing. 
For example, if we have a numeric vector to sort:<br /> 
vector.2.sort = c(-192, 76, 841, NA, 1670, 163, 147, 101, -112, -231, -9, 119, 112, NA)<br />
</p>
<p>When sorting numbers in an ascending (default) manner,
the largest negative numbers get ordered first 
leading up to the largest positive numbers
and finally (by default in R) NAs being positioned at the end of the vector:<br />
numeric.sort = c(-231, -192, -112, -9, 76, 101, 112, 119, 147, 163, 841, 1670, NA, NA)<br />
</p>
<p>Instead, if the same vector is sorted alphabetically the the resultant vector is: 
</p>
<p>alphabetic.sort = (-112, -192, -231, -9, 101, 112, 119, 147, 163, 1670, 76, 841, NA, NA)<br />
</p>
<p>Server function called: <code>dataFrameSortDS</code>.
</p>


<h3>Value</h3>

<p><code>ds.dataFrameSort</code> returns the sorted data frame is written to the server-side. 
Also, two validity messages are returned to the client-side
indicating the name of the <code>newobj</code> which 
has been created in each data source and if 
it is in a valid form.
</p>


<h3>Author(s)</h3>

<p>DataSHIELD Development Team
</p>


<h3>Examples</h3>

<pre>
## Not run: 
  ## Version 6, for version 5 see the Wiki
  
  # connecting to the Opal servers

  require('DSI')
  require('DSOpal')
  require('dsBaseClient')

  builder &lt;- DSI::newDSLoginBuilder()
  builder$append(server = "study1", 
                 url = "http://192.168.56.100:8080/", 
                 user = "administrator", password = "datashield_test&amp;", 
                 table = "CNSIM.CNSIM1", driver = "OpalDriver")
  builder$append(server = "study2", 
                 url = "http://192.168.56.100:8080/", 
                 user = "administrator", password = "datashield_test&amp;", 
                 table = "CNSIM.CNSIM2", driver = "OpalDriver")
  builder$append(server = "study3",
                 url = "http://192.168.56.100:8080/", 
                 user = "administrator", password = "datashield_test&amp;", 
                 table = "CNSIM.CNSIM3", driver = "OpalDriver")
  logindata &lt;- builder$build()
  
  connections &lt;- DSI::datashield.login(logins = logindata, assign = TRUE, symbol = "D") 
  
  # Sorting the data frame
  ds.dataFrameSort(df.name = "D",
                   sort.key.name = "D$LAB_TSC",
                   sort.descending = TRUE,
                   sort.method = "numeric",
                   newobj = "df.sort",
                   datasources = connections[1]) #only the first Opal server is used ("study1")
                   
  # Clear the Datashield R sessions and logout                 
  datashield.logout(connections) 
  

## End(Not run)   
</pre>

<hr /><div style="text-align: center;">[Package <em>dsBaseClient</em> version 6.1.1 ]</div>
</body></html>
